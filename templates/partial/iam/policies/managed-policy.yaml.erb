  <%= @id %>:
    Type: "AWS::IAM::ManagedPolicy"
    Properties:
      ManagedPolicyName: !Sub 'pr-iam-${ProjectName}-<%= @name %>-accesspolicy-<%= @tag %>'
      <% if @roles && !@roles.nil? %>
      Roles: <% @roles.each do |role| %>
        - <%= @role %> <% end %>
      <% end %>
      <% if @groups && !@groups.nil? %>
      Groups: <% @groups.each do |group| %>
        - <%= @group %> <% end %>
      <% end %>
      <% if @users && !@users.nil? %>
      Users: <% @users.each do |user| %>
        - <%= @user %> <% end %>
      <% end %>
      PolicyDocument:
        Version: 2012-10-17
        Statement:
  <%= partial(@policyDoc) %>
