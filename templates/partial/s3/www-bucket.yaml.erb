  <%= @id %>:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicReadWrite
      BucketName: <%= @bucketName %>
      VersioningConfiguration:
        Status: 'Enabled'
      WebsiteConfiguration:
        IndexDocument: !Ref 'IndexDocument'

  <%= @id %>Policy:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: <%= @id %>
      PolicyDocument:
        Statement:
        - Sid: 'AllowAccountUsers'
          Effect: Allow
          Principal: '*'
          Action: s3:GetObject
          Resource: !Join ['', ['arn:aws:s3:::', <%= @bucketName %>, /*]]
          Condition:
            IpAddress:
              aws:SourceIp: !Ref IPWhiteList
